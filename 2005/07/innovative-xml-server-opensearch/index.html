<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Innovative XML Server - OpenSearch | Ryan Eby</title>
<meta name=keywords content>
<meta name=description content="I&rsquo;ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ilsthat referred to OpenSearch. I had done a little with OpenSearchwhen it first came out but not since I started playing with the XML server.">
<meta name=author content>
<link rel=canonical href=https://ryaneby.com/2005/07/innovative-xml-server-opensearch/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ryaneby.com/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://ryaneby.com/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://ryaneby.com/favicon-32x32.png>
<link rel=apple-touch-icon href=https://ryaneby.com/apple-touch-icon.png>
<link rel=mask-icon href=https://ryaneby.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.92.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Innovative XML Server - OpenSearch">
<meta property="og:description" content="I&rsquo;ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ilsthat referred to OpenSearch. I had done a little with OpenSearchwhen it first came out but not since I started playing with the XML server.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ryaneby.com/2005/07/innovative-xml-server-opensearch/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2005-07-01T00:00:00+00:00">
<meta property="article:modified_time" content="2005-07-01T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Innovative XML Server - OpenSearch">
<meta name=twitter:description content="I&rsquo;ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ilsthat referred to OpenSearch. I had done a little with OpenSearchwhen it first came out but not since I started playing with the XML server.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://ryaneby.com/posts/"},{"@type":"ListItem","position":3,"name":"Innovative XML Server - OpenSearch","item":"https://ryaneby.com/2005/07/innovative-xml-server-opensearch/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Innovative XML Server - OpenSearch","name":"Innovative XML Server - OpenSearch","description":"I\u0026rsquo;ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ilsthat referred to OpenSearch. I had done a little with OpenSearchwhen it first came out but not since I started playing with the XML server.","keywords":[],"articleBody":"I’ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ilsthat referred to OpenSearch. I had done a little with OpenSearchwhen it first came out but not since I started playing with the XML server. BTW, I recommend reading the whole post over at open-ils. Lots of great thinking in it.\nSo here’s the end product: http://a9.com/harry%20potter?a=sB0007WF86MYou’ll notice that right now I only have the title and availabilities. This is because it was a quick mock-up and I wanted to make things a bit quicker (why in a future post). You can really add any data from the XML output by modifying the XSL file for the description. I find this is really easy to read though I really should add the pub date and call number. A special note as well: certain resources didn’t seem to have a call number (thesis I think) so I chose to link to the OPAC by bib number. This also is a time saver as it is returned in the basic XML result.\nFirst you’ll need something server-side that can transform xml. I prefer to use php5 as these things are really simple in it. What you’ll do is take arguments on the URL and then create a xml server query using it. For example here is a sample OpenSearch URL:\nopensearch.php?q=harry%20potter\u0026p=1\u0026c=10This sets the query to be “harry potter”, the first page of results and 10 titles returned. The resulting xml server query would be:\npath.to.xmlopac/.$term.\"/0/0/\".$page.\"/\".$count.\"?avsrank=D\u0026noexclude=WXROOT.Heading.Title.IIIRECORD\u0026exclude=WXROOT.Heading.Title.IIIRECORD.VARFLDPRIMARYALTERNATEPAIRA quick runthrough of what I’m doing. The $term is actually the query from the URL with a “X” put in front of it to signify that it is keyword. I could just put the X right in the url line but remember I’m reusing this from my RSS work which actually allows you to choose what kind of search. Page and count are simlar except where I have page is actually the result number. I do some arithmetic behind the scenes so page 2 starts at result 11. I know this is confusing and opensearch supports passing result number but again with was something I reused from before.\nOnce you have the URL you will want to apply XSLT to it. Here’s the full template to transform your XML result into OpenSearch:\nXSL File(you may need to view source as I don’t have all my mimetypes set)\nYou then need to make your script return the resulting feed. In my case I just echo’d the result. There’s an additional file you need to create to describe your opensearch interface which is outlined at the OpenSearch site. My explanation is probably bad so here are the 3 files you need:\nI’m learning as I go so feel free to offer suggestions on coding, but please don’t mock.\n","wordCount":"497","inLanguage":"en","datePublished":"2005-07-01T00:00:00Z","dateModified":"2005-07-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://ryaneby.com/2005/07/innovative-xml-server-opensearch/"},"publisher":{"@type":"Organization","name":"Ryan Eby","logo":{"@type":"ImageObject","url":"https://ryaneby.com/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://ryaneby.com accesskey=h title="Ryan Eby (Alt + H)">Ryan Eby</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://ryaneby.com/archives/ title=archive>
<span>archive</span>
</a>
</li>
<li>
<a href=https://ryaneby.com/about/ title=about>
<span>about</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://ryaneby.com>Home</a>&nbsp;»&nbsp;<a href=https://ryaneby.com/posts/>Posts</a></div>
<h1 class=post-title>
Innovative XML Server - OpenSearch
</h1>
<div class=post-meta><span title="2005-07-01 00:00:00 +0000 UTC">July 1, 2005</span>&nbsp;·&nbsp;3 min
</div>
</header>
<div class=post-content><p>I&rsquo;ve been working on various ideas for using our Innovative XML server. I first began with creating html views of featured lists. Once I had the syntax down I created RSS 2.0 feeds for the lists. While I was doing this I came across a post over at open-ils that referred to OpenSearch. I had done a little with OpenSearch when it first came out but not since I started playing with the XML server. BTW, I recommend reading the whole post over at open-ils. Lots of great thinking in it.</p>
<p>So here&rsquo;s the end product:
<a href="http://a9.com/harry%20potter?a=sB0007WF86M">http://a9.com/harry%20potter?a=sB0007WF86M</a></p>
<p>You&rsquo;ll notice that right now I only have the title and availabilities. This is because it was a quick mock-up and I wanted to make things a bit quicker (why in a future post). You can really add any data from the XML output by modifying the XSL file for the description. I find this is really easy to read though I really should add the pub date and call number. A special note as well: certain resources didn&rsquo;t seem to have a call number (thesis I think) so I chose to link to the OPAC by bib number. This also is a time saver as it is returned in the basic XML result.</p>
<p>First you&rsquo;ll need something server-side that can transform xml. I prefer to use php5 as these things are really simple in it. What you&rsquo;ll do is take arguments on the URL and then create a xml server query using it. For example here is a sample OpenSearch URL:</p>
<p>opensearch.php?q=harry%20potter&p=1&c=10</p>
<p>This sets the query to be &ldquo;harry potter&rdquo;, the first page of results and 10 titles returned. The resulting xml server query would be:</p>
<p>path.to.xmlopac/.$term."/0/0/".$page."/".$count."?avsrank=D&noexclude=WXROOT.Heading.Title.IIIRECORD&exclude=WXROOT.Heading.Title.IIIRECORD.VARFLDPRIMARYALTERNATEPAIR</p>
<p>A quick runthrough of what I&rsquo;m doing. The $term is actually the query from the URL with a &ldquo;X&rdquo; put in front of it to signify that it is keyword. I could just put the X right in the url line but remember I&rsquo;m reusing this from my RSS work which actually allows you to choose what kind of search. Page and count are simlar except where I have page is actually the result number. I do some arithmetic behind the scenes so page 2 starts at result 11. I know this is confusing and opensearch supports passing result number but again with was something I reused from before.</p>
<p>Once you have the URL you will want to apply XSLT to it. Here&rsquo;s the full template to transform your XML result into OpenSearch:</p>
<p>XSL File (you may need to view source as I don&rsquo;t have all my mimetypes set)</p>
<p>You then need to make your script return the resulting feed. In my case I just echo&rsquo;d the result. There&rsquo;s an additional file you need to create to describe your opensearch interface which is outlined at the OpenSearch site. My explanation is probably bad so here are the 3 files you need:</p>
<p>I&rsquo;m learning as I go so feel free to offer suggestions on coding, but please don&rsquo;t mock.</p>
</div>
<footer class=post-footer>
<nav class=paginav>
<a class=prev href=https://ryaneby.com/2005/07/blogarithms-%C3%A3%C3%A2%C3%A3%C3%A2-the-new-project/>
<span class=title>« Prev Page</span>
<br>
<span>Blogarithms ÃâÃÂ» The New Project</span>
</a>
<a class=next href=https://ryaneby.com/2005/07/mit-weblog-survey/>
<span class=title>Next Page »</span>
<br>
<span>MIT Weblog Survey</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>